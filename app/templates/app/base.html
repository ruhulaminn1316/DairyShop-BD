<!doctype html>
{% load static %}
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap 5 + Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{% static 'app/css/owl.carousel.min.css' %}">
  <link rel="stylesheet" href="{% static 'app/css/all.min.css' %}">
  <link rel="stylesheet" href="{% static 'app/css/style.css' %}">

  <style>
    :root {
      --green: #2E8B57;
      --green-dark: #1e6b42;
      --light: #f8fff9;
    }

    body {
      background: linear-gradient(135deg, #f8fdf9 0%, #f0f8f4 100%);
      background-attachment: fixed;
      font-family: 'Georgia', 'Times New Roman', serif;
      min-height: 100vh;
      color: #212529;
    }

    .navbar {
      background: white !important;
      padding: 0.85rem 0;
      box-shadow: 0 4px 20px rgba(0,0,0,0.07);
      border-bottom: 1px solid #eef7f1;
      position: sticky;
      top: 0;
      z-index: 1030;
    }

    .navbar {
    transition: background 0.3s ease, box-shadow 0.3s ease;
}

.navbar.scrolled {
    background: rgba(255,255,255,0.98) !important;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 10px rgba(0,0,0,0.10);
}


    /* ALL NAVBAR PILLS */
    .nav-pill {
      background: white;
      color: var(--green) !important;
      border: 2.8px solid var(--green);
      border-radius: 50px;
      padding: 0.55rem 1.7rem;
      font-weight: 600;
      font-size: 0.95rem;
      min-height: 44px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 7px;
      transition: all 0.35s ease;
      box-shadow: 0 4px 15px rgba(46,139,87,0.18);
      text-decoration: none !important;
      white-space: nowrap;
    }

    .nav-pill:hover,
    .nav-pill.active {
      background: var(--green) !important;
      color: white !important;
      transform: translateY(-4px);
      box-shadow: 0 12px 28px rgba(46,139,87,0.35);
    }

    .nav-link.active { background: var(--green) !important; color: white !important; }

    /* SEARCH FORM - PERFECT ICON */
    .search-form {
      position: relative;
      width: 270px;
    }

    .search-form .form-control {
      height: 44px;
      border-radius: 50px;
      padding: 0 1.4rem 0 1.4rem;
      border: 2.8px solid var(--green);
      font-size: 0.95rem;
      background: white;
      box-shadow: 0 4px 15px rgba(46,139,87,0.15);
    }

    .search-form .form-control:focus {
      border-color: var(--green);
      box-shadow: 0 0 0 0.2rem rgba(46,139,87,0.25);
    }

    .search-form button {
      position: absolute;
      top: 0;
      right: 0;
      height: 44px;
      width: 44px;
      border-radius: 50%;
      background: var(--green);
      color: white;
      border: none;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(46,139,87,0.25);
    }

    .search-form button:hover {
      background: var(--green-dark);
      transform: scale(1.05);
    }

    .badge-notif {
      font-size: 0.68rem;
      padding: 0.25em 0.6em;
    }

    .dropdown-menu {
      border: none;
      border-radius: 16px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.12);
      padding: 0.7rem 0;
      margin-top: 10-tenpx;
    }

    .dropdown-item {
      padding: 0.65rem 1.5rem;
      border-radius: 12px;
      margin: 0.2rem 1rem;
      font-weight: 500;
    }

    .dropdown-item:hover {
      background: var(--light);
      color: var(--green);
    }

    .footer {
      background: #f8f9fa;
      padding: 4rem 0 3rem;
      margin-top: 8rem;
      border-top: 1px solid #e9ecef;
    }
  </style>

  <title>Daily Product | {% block title %}Home{% endblock %}</title>
</head>
<body>
<nav class="navbar navbar-expand-lg">
  <div class="container-fluid">

    <!-- LOGO -->
    <a class="navbar-brand" href="{% url 'home' %}">
      <img src="{% static 'app/images/product/mugdho7.png' %}"
           width="100" height="100"
           alt="Daily Product"
           class="rounded-circle shadow-sm">
    </a>

    <!-- MOBILE TOGGLER -->
    <button class="navbar-toggler border-0"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navContent">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navContent">

      <!-- LEFT SIDE -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0 gap-2 align-items-center">

        <li class="nav-item">
          <a class="nav-pill nav-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}"
             href="{% url 'home' %}">Home</a>
        </li>

        <li class="nav-item dropdown">
          <a class="nav-pill nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">
            Products
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="{% url 'category' 'ML' %}">Milk</a></li>
            <li><a class="dropdown-item" href="{% url 'category' 'CR' %}">Curd</a></li>
            <li><a class="dropdown-item" href="{% url 'category' 'PN' %}">Paneer</a></li>
            <li><a class="dropdown-item" href="{% url 'category' 'CZ' %}">Cheese</a></li>
            <li><a class="dropdown-item" href="{% url 'category' 'IC' %}">Ice-cream</a></li>
          </ul>
        </li>

        <li class="nav-item">
          <a class="nav-pill nav-link {% if request.resolver_match.url_name == 'about' %}active{% endif %}"
             href="{% url 'about' %}">About</a>
        </li>

        <li class="nav-item">
          <a class="nav-pill nav-link {% if request.resolver_match.url_name == 'contact' %}active{% endif %}"
             href="{% url 'contact' %}">Contact</a>
        </li>

        <li class="nav-item">
          <a class="nav-pill nav-link position-relative {% if request.resolver_match.url_name == 'cart' %}active{% endif %}"
             href="{% url 'cart' %}">
            Cart
            {% if cart_count|default:0 > 0 %}
              <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger badge-notif">
                {{ cart_count }}
              </span>
            {% endif %}
          </a>
        </li>

      </ul>

      <!-- RIGHT SIDE -->
      <div class="d-flex align-items-center gap-3">

        {% if user.is_authenticated %}

          <a class="nav-pill {% if request.resolver_match.url_name == 'my_orders' %}active{% endif %}"
             href="{% url 'my_orders' %}">
            My Orders
          </a>

          {% if user.is_staff %}
          <a class="nav-pill {% if request.resolver_match.url_name == 'admin_dashboard' %}active{% endif %}"
             href="{% url 'admin_dashboard' %}">
            <i class="bi bi-speedometer2 me-1"></i> Admin
          </a>
          {% endif %}

          <div class="dropdown">
            <a class="nav-pill dropdown-toggle" href="#" data-bs-toggle="dropdown">
              Hi, {{ user.first_name|default:user.username }}
            </a>
            <ul class="dropdown-menu dropdown-menu-end">
              <li>
                <form method="POST" action="{% url 'account_logout' %}">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-danger w-100">
                    Logout
                  </button>
                </form>
              </li>
            </ul>
          </div>

        {% else %}

          <a class="nav-pill" href="{% url 'account_login' %}">Login</a>
          <a class="nav-pill" href="{% url 'account_signup' %}">Register</a>

        {% endif %}

        <!-- SEARCH BAR -->
        <form class="search-form" method="GET" action="{% url 'search' %}">
          <input class="form-control"
                 type="search"
                 placeholder="Search products..."
                 name="query"
                 required>
          <button type="submit">
            <i class="bi bi-search"></i>
          </button>
        </form>

      </div>
    </div>
  </div>
</nav>


  {% block banner-slider %}{% endblock %}
  {% block main-content %}{% endblock %}

  <footer class="footer text-center py-5 mt-5">
    <p class="mb-0 text-muted">
      © 2025 Daily Product • Made with love in Bangladesh<br>
      Developed by <strong>Sharat Acharja Mugdho</strong> • 
      <a href="mailto:sharatacharjee6@gmail.com">sharatacharjee6@gmail.com</a>
    </p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{% static 'app/js/all.min.js' %}"></script>
  <script src="{% static 'app/js/myscript.js' %}"></script>

  <script>
    window.addEventListener('scroll', () => {
      document.querySelector('.navbar').classList.toggle('scrolled', window.scrollY > 80);
    });
  </script>
</body>
</html>